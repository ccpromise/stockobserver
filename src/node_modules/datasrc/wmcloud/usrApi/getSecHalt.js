
const getSecHalt = require('../sysApi').getSecHalt;

module.exports = function (date) {
    return getSecHalt({ beginDate: date, endDate: date }).then((r) => {
        if(r.retCode !== 1) return Promise.reject(new Error(r.retMsg));
        return r.data.filter((stock) => {
            return ['0', '3', '6'].indexOf(stock.secID[0]) > -1
            && stock.assetClass === 'E'
            && stock.listStatusCD === 'L'
            && (stock.exchangeCD === 'XSHE' || stock.exchangeCD === 'XSHG')
        }).map((stock) => {
            return stock.secID.toLowerCase();
        });
    })
}
