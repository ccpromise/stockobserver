
const utility = require('utility');
const access_token = require('config').access_token;

const opt = {
    host: 'api.wmcloud.com',
    path: '/data/v1/api/market/getMktEqud.json',
    headers: {
        'Authorization': 'Bearer ' + access_token,
    },
    useHttps: true
}

module.exports = function(query) {
    return Promise.resolve().then(() => {
        var option = utility.object.clone(opt);
        option.query = 'field='+query.field+'&beginDate='+query.beginDate+'&endDate='+query.endDate+'&secID='+query.secID+'&ticker='+query.ticker+'&tradeDate='+query.tradeDate;
        //wmcloud is an https api
        return utility.request(option).then((data) => {
            return JSON.parse(data.toString());
        })
    })
};
